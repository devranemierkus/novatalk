<!DOCTYPE html><html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NovaTalk - Sesli & G√∂r√ºnt√ºl√º</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #e0f7fa;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    #avatar {
      width: 160px;
      height: 160px;
      background: #26c6da;
      border-radius: 50%;
      position: relative;
      margin-bottom: 25px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .eye {
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 45px;
      box-shadow: inset 0 0 3px #444;
    }
    .eye.left { left: 35px; }
    .eye.right { right: 35px; }
    .pupil {
      width: 9px;
      height: 9px;
      background: #004d40;
      border-radius: 50%;
      position: absolute;
      top: 6px;
      left: 6px;
    }
    #mouth {
      width: 65px;
      height: 25px;
      background: #004d40;
      border-radius: 0 0 30px 30px;
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      transition: height 0.1s ease, background 0.1s;
    }
    #controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: background 0.3s;
    }
    #speakBtn, #callBtn, #videoCallBtn, #endCallBtn {
      background: #00897b;
      color: white;
    }
    #status {
      margin-top: 12px;
      font-size: 15px;
      color: #004d40;
    }
    #videoContainer {
      display: none;
      flex-direction: column;
      align-items: center;
    }
    video {
      width: 300px;
      border-radius: 12px;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <div id="avatar">
    <div class="eye left"><div class="pupil"></div></div>
    <div class="eye right"><div class="pupil"></div></div>
    <div id="mouth"></div>
  </div>  <div id="controls">
    <button id="speakBtn">üé§ Bas & Konu≈ü</button>
    <button id="callBtn">üìû Sesli Arama</button>
    <button id="videoCallBtn">üìπ G√∂r√ºnt√ºl√º Arama</button>
    <button id="endCallBtn">‚ùå Kapat</button>
  </div>
  <div id="status">Mikrofon izni isteniyor...</div>
  <div id="videoContainer">
    <video id="localVideo" autoplay muted></video>
  </div><script>
const OPENAI_API_KEY = 'sk-xxx'; // Buraya kendi API anahtarƒ±nƒ±zƒ± ekleyin
const speakBtn = document.getElementById('speakBtn');
const callBtn = document.getElementById('callBtn');
const videoCallBtn = document.getElementById('videoCallBtn');
const endCallBtn = document.getElementById('endCallBtn');
const statusText = document.getElementById('status');
const mouth = document.getElementById('mouth');
const videoContainer = document.getElementById('videoContainer');
const localVideo = document.getElementById('localVideo');

let recognition;

async function initPermissions() {
  try {
    await navigator.mediaDevices.getUserMedia({ audio: true });
    statusText.textContent = "üé§ Mikrofon izni verildi.";
  } catch {
    statusText.textContent = "‚ùå Mikrofon izni yok.";
  }
}
initPermissions();

if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
  recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recognition.lang = 'tr-TR';
  recognition.interimResults = false;

  recognition.onresult = async (event) => {
    const text = event.results[0][0].transcript;
    statusText.textContent = "Yanƒ±t hazƒ±rlanƒ±yor...";
    const reply = await fetch("https://api.openai.com/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${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}`
      },
      body: JSON.stringify({
        model: "gpt-3.5-turbo",
        messages: [{ role: "user", content: text }]
      })
    });
    const data = await reply.json();
    const response = data.choices[0].message.content;
    speak(response);
  };

  recognition.onend = () => {
    mouth.style.height = '25px';
  }
}

speakBtn.addEventListener('touchstart', () => {
  recognition.start();
  mouth.style.height = '40px';
  statusText.textContent = "üéß Dinleniyor...";
});

speakBtn.addEventListener('touchend', () => {
  recognition.stop();
});

function speak(text) {
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'tr-TR';
  utter.onstart = () => mouth.style.height = '45px';
  utter.onend = () => mouth.style.height = '25px';
  speechSynthesis.speak(utter);
  statusText.textContent = "‚úÖ Yanƒ±tlandƒ±.";
}

callBtn.onclick = () => {
  alert("Sesli arama ba≈ülatƒ±lƒ±yor (sim√ºlasyon)");
  statusText.textContent = "üìû Sesli arama aktif";
};

videoCallBtn.onclick = async () => {
  const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
  localVideo.srcObject = stream;
  videoContainer.style.display = 'flex';
  statusText.textContent = "üìπ G√∂r√ºnt√ºl√º arama aktif";
};

endCallBtn.onclick = () => {
  const tracks = localVideo.srcObject?.getTracks();
  tracks?.forEach(t => t.stop());
  localVideo.srcObject = null;
  videoContainer.style.display = 'none';
  statusText.textContent = "‚ùå Arama sonlandƒ±rƒ±ldƒ±";
};
</script></body>
</html>
